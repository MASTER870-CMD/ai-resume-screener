<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Resume Screener ‚Äî Professional (White + Green)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.8.162/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    :root{ --green-700:#0f766e; --green-500:#10b981; --muted:#6b7280; --bg:#f6fbf9 }
    body{background:var(--bg);font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#07303a}
    .card{border-radius:12px;box-shadow:0 8px 24px rgba(8,12,12,0.06)}
    .brand{font-weight:700;color:var(--green-700)}
    .muted{color:var(--muted)}
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#f0fdf4;border:1px solid #d1fae5;color:#064e3b;margin:4px 6px 4px 0;font-weight:600}
    pre.extract{white-space:pre-wrap;max-height:200px;overflow:auto;background:#fcfffb;padding:12px;border-radius:8px;border:1px solid #e6f6ef}
    .section-title{font-weight:700;color:#043936}
    .score-big{font-size:1.6rem;font-weight:800;color:var(--green-700)}
    .list-compact li{margin-bottom:8px}
  </style>
</head>
<body>
  <div class="container py-4">
    <div class="d-flex align-items-center gap-3 mb-3">
      <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#ecfdf5,#bbf7d0);display:flex;align-items:center;justify-content:center;font-size:22px">üè¢</div>
      <div>
        <div class="brand">AI Resume Screener</div>
        <div class="muted">Professional HR-style analyzer ‚Äî Offline-first. Upload PDF or paste text.</div>
      </div>
      <div class="ms-auto text-end d-none d-md-block">
        <div style="display:inline-block;padding:6px 12px;background:linear-gradient(90deg,var(--green-700),var(--green-500));color:#fff;border-radius:999px;font-weight:700">ATS: <span id="liveAts">‚Äî</span></div>
      </div>
    </div>

    <div class="row g-4">
      <!-- Controls -->
      <div class="col-lg-4">
        <div class="card p-3 mb-3">
          <h6 class="section-title">1. Upload or Paste Resume</h6>
          <label class="form-label small">Upload PDF (recommended: searchable PDF)</label>
          <input id="pdfInput" type="file" accept="application/pdf" class="form-control mb-2" />
          <div class="form-text mb-2 muted">Scanned images may not extract well. You can paste plain text below instead.</div>

          <label class="form-label small mt-2">Paste Resume Text</label>
          <textarea id="pasteText" rows="6" class="form-control mb-2" placeholder="Paste resume text here (optional)"></textarea>

          <div class="d-grid gap-2">
            <button id="analyzeBtn" class="btn" style="background:linear-gradient(90deg,var(--green-700),var(--green-500));color:#fff">Extract & Analyze</button>
            <button id="loadSampleBtn" class="btn btn-outline-secondary">Load Example</button>
          </div>

          <hr />
          <div class="d-flex justify-content-between align-items-center">
            <div class="muted small">History (local)</div>
            <button id="clearHistoryBtn" class="btn btn-sm btn-outline-danger">Clear</button>
          </div>
          <ul id="historyList" class="list-group list-group-flush mt-2 small"></ul>
        </div>

        <div class="card p-3">
          <h6 class="section-title">2. Export</h6>
          <div class="muted small mb-2">Download a formatted HR report (PDF) containing scores and suggested rewrites.</div>
          <button id="downloadReport" class="btn btn-success w-100">Download Report (PDF)</button>
        </div>
      </div>

      <!-- Results -->
      <div class="col-lg-8">
        <div class="card p-3 mb-3">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <div class="section-title">Analysis</div>
              <div class="muted small">Target role</div>
              <select id="targetRole" class="form-select form-select-sm mt-1 w-auto">
                <option>Software Developer</option>
                <option>Frontend Developer</option>
                <option>Backend Developer</option>
                <option>Data Scientist</option>
                <option>Product Manager</option>
              </select>
            </div>

            <div class="text-end">
              <div class="muted small">Overall ATS Score</div>
              <div id="atsScore" class="score-big">‚Äî</div>
            </div>
          </div>

          <div class="row mt-3 g-3">
            <div class="col-md-4">
              <div class="p-3 rounded" style="background:#fff;border:1px solid #eef7f2">
                <div class="muted small">Grammar</div>
                <div id="grammarScore" class="score-big">‚Äî</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="p-3 rounded" style="background:#fff;border:1px solid #eef7f2">
                <div class="muted small">Experience</div>
                <div id="experienceScore" class="score-big">‚Äî</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="p-3 rounded" style="background:#fff;border:1px solid #eef7f2">
                <div class="muted small">Skills Match</div>
                <div id="skillsMatch" class="score-big">‚Äî</div>
              </div>
            </div>
          </div>

          <hr class="my-3">
          <div>
            <div class="section-title">Extracted Text (preview)</div>
            <pre id="extractedText" class="extract muted small">(no text yet)</pre>
          </div>
        </div>

        <div class="card p-3 mb-3">
          <div class="row">
            <div class="col-md-6">
              <div class="section-title">Strengths</div>
              <ol id="strengthsList" class="list-compact mt-2"></ol>
            </div>
            <div class="col-md-6">
              <div class="section-title">Weaknesses</div>
              <ol id="weaknessesList" class="list-compact mt-2"></ol>
            </div>
          </div>
        </div>

        <div class="card p-3 mb-3">
          <div class="section-title">Missing Skills for <span id="roleLabel">Software Developer</span></div>
          <div id="missingSkills" class="mt-2"></div>
        </div>

        <div class="card p-3 mb-3">
          <div class="section-title">Suggested Rewrites</div>
          <div class="row g-3 mt-2">
            <div class="col-12">
              <label class="form-label small">Summary</label>
              <textarea id="rewriteSummary" class="form-control" rows="3" placeholder="Suggested summary"></textarea>
            </div>
            <div class="col-12">
              <label class="form-label small">Skills (comma separated)</label>
              <textarea id="rewriteSkills" class="form-control" rows="2" placeholder="Suggested skills"></textarea>
            </div>
            <div class="col-12">
              <label class="form-label small">Experience bullets</label>
              <textarea id="rewriteExperience" class="form-control" rows="4" placeholder="Suggested experience bullets"></textarea>
            </div>
            <div class="col-12 text-end">
              <button id="applyRewrite" class="btn btn-outline-primary">Copy Rewrites to Clipboard</button>
            </div>
          </div>
        </div>

        <div class="text-center muted small">Built with HTML/CSS/JS ‚Äî Offline-first. For best results use searchable PDF.</div>
      </div>
    </div>
  </div>

<script>
// PDF.js setup
const pdfjsLib = window['pdfjs-dist/build/pdf'];
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.8.162/pdf.worker.min.js';

// Role skills (simple lists)
const ROLE_SKILLS = {
  'Software Developer':['javascript','html','css','react','node','git','sql','docker','rest','api','typescript','java','python','aws'],
  'Frontend Developer':['javascript','html','css','react','vue','typescript','accessibility','responsive','webpack','tailwind'],
  'Backend Developer':['node','express','java','spring','python','django','sql','mongodb','docker','kubernetes','api'],
  'Data Scientist':['python','pandas','numpy','sql','scikit-learn','tensorflow','pytorch','statistics','machine learning'],
  'Product Manager':['roadmap','stakeholder','analytics','a/b testing','user stories','jira','okrs']
};

function normalizeText(t){ return (t||'').toLowerCase().replace(/[^a-z0-9+#\.\-\s]/g,' '); }
function detectSkills(text, role){
  const norm = normalizeText(text);
  const found = new Set();
  const tokens = norm.split(/\s+/);
  (ROLE_SKILLS[role]||[]).forEach(skill=>{ const k=skill.toLowerCase(); if(norm.includes(k) || tokens.includes(k.replace(/\s+/g,''))) found.add(skill); });
  const extras = ['reactjs','nodejs','graphql','docker','k8s','kubernetes','aws','gcp','azure','typescript','rest api'];
  extras.forEach(e=>{ if(norm.includes(e)) found.add(e); });
  return Array.from(found);
}

function computeATSSimilarity(text, role){ const skills = ROLE_SKILLS[role]||[]; const found = detectSkills(text, role); const percent = Math.round((found.length/Math.max(1,skills.length))*100); const len = (text||'').split(/\s+/).length; const lengthBonus = Math.min(10, Math.floor(len/500)*2); return Math.max(5, Math.min(100, percent + lengthBonus)); }

function computeGrammarScore(text){ if(!text) return 50; const sentences = (text.match(/[\.\?!]\s|\n/g)||[]).length + 1; const words = (text.split(/\s+/).filter(Boolean)).length; const avg = words/Math.max(1,sentences); let score = 100 - Math.abs(14-avg)*4; if(score<20) score=20; if(score>100) score=100; return Math.round(score); }

function computeExperienceScore(text){ const norm=(text||'').toLowerCase(); const yearsMatches = norm.match(/(\d+)\s*\+?\s*years?/g) || []; let years=0; if(yearsMatches.length){ years = Math.max(...yearsMatches.map(m=>parseInt(m.match(/\d+/)[0])||0)); } let score = Math.min(100, years*10 + (norm.includes('senior')?15:0) + (norm.includes('lead')?10:0)); if(score===0) score=30; return Math.round(score); }

function generateStrengthsWeaknesses(text, role){ const found = detectSkills(text, role); const strengths=[]; const weaknesses=[];
  if(found.includes('javascript')||found.includes('react')) strengths.push('Strong front-end development skills');
  if(found.includes('node')||found.includes('express')) strengths.push('Backend / API implementation experience');
  if(found.includes('docker')||found.includes('kubernetes')) strengths.push('Familiar with containerization and deployment');
  if(found.length>=4) strengths.push('Broad tech-stack exposure and adaptability');
  if(strengths.length<4) strengths.push('Clear communication and collaboration skills');
  const required = ROLE_SKILLS[role]||[]; const missing = required.filter(r=>!found.map(f=>f.toLowerCase()).includes(r.toLowerCase()));
  if(missing.length) weaknesses.push('Missing: ' + missing.slice(0,3).join(', '));
  if(!text.match(/test|jest|unit test|integration test/i)) weaknesses.push('Limited mention of automated testing');
  if(!text.match(/performance|optimi|scale|latency/i)) weaknesses.push('Quantifiable impact or performance metrics missing');
  while(weaknesses.length<4) weaknesses.push('More measurable outcomes (metrics) would strengthen the resume');
  return { strengths: strengths.slice(0,5), weaknesses: weaknesses.slice(0,5), missingAll: missing };
}

function extractBullets(text){ const lines = (text||'').split(/\n+/).map(l=>l.trim()).filter(Boolean); const bullets=[]; for(const line of lines){ if(line.length>30 && bullets.length<8){ const cleaned = line.replace(/\*+/g,'').replace(/\s{2,}/g,' ').trim(); bullets.push(cleaned); } } return bullets.slice(0,8); }

// PDF text extraction
function readFileAsArrayBuffer(file){ return new Promise((res,rej)=>{ const fr=new FileReader(); fr.onload=()=>res(fr.result); fr.onerror=rej; fr.readAsArrayBuffer(file); }); }
async function extractTextFromPDF(file){ const arrayBuffer = await readFileAsArrayBuffer(file); const pdf = await pdfjsLib.getDocument({data:arrayBuffer}).promise; let fullText=''; for(let i=1;i<=pdf.numPages;i++){ const page = await pdf.getPage(i); const txt = await page.getTextContent(); const pageText = txt.items.map(it=>it.str).join(' '); fullText += pageText + '\n\n'; } return fullText.trim(); }

// sanitize
function cleanText(text){ return (text||'').replace(/\*+/g,'').replace(/\s*n\s+/g,' ').replace(/\s{2,}/g,' ').trim(); }

async function analyzeAndRender(text){ text = cleanText(text);
 const role = document.getElementById('targetRole').value; document.getElementById('roleLabel').innerText = role;
 const ats = computeATSSimilarity(text, role); const grammar = computeGrammarScore(text); const experience = computeExperienceScore(text); const found = detectSkills(text, role); const matchPercent = Math.round((found.length/Math.max(1, (ROLE_SKILLS[role]||[]).length))*100);
 const { strengths, weaknesses, missingAll } = generateStrengthsWeaknesses(text, role); const bullets = extractBullets(text);
 document.getElementById('atsScore').innerText = ats + '%'; document.getElementById('liveAts').innerText = ats + '%'; document.getElementById('grammarScore').innerText = grammar + '%'; document.getElementById('experienceScore').innerText = experience + '%'; document.getElementById('skillsMatch').innerText = matchPercent + '%'; document.getElementById('extractedText').innerText = text? text.slice(0,8000): '(no text found)';
 const sEl=document.getElementById('strengthsList'); sEl.innerHTML=''; strengths.forEach(s=>{ const li=document.createElement('li'); li.innerText = s; sEl.appendChild(li); });
 const wEl=document.getElementById('weaknessesList'); wEl.innerHTML=''; weaknesses.forEach(w=>{ const li=document.createElement('li'); li.innerText=w; wEl.appendChild(li); });
 const missEl=document.getElementById('missingSkills'); missEl.innerHTML=''; if(missingAll.length===0){ const d=document.createElement('div'); d.className='muted'; d.innerText='No major missing skills detected for this role.'; missEl.appendChild(d); } else { missingAll.slice(0,12).forEach(m=>{ const sp=document.createElement('span'); sp.className='chip'; sp.innerText = m; missEl.appendChild(sp); }); }
 document.getElementById('rewriteSummary').value = `Results-driven ${role} with experience in ${found.slice(0,6).join(', ') || 'relevant technologies'}. Demonstrated ability to deliver impactful features and collaborate across teams.`;
 document.getElementById('rewriteSkills').value = found.join(', ') || (ROLE_SKILLS[role]||[]).slice(0,6).join(', ');
 if(bullets.length){ document.getElementById('rewriteExperience').value = bullets.map(b=>'- '+b).join('\n'); } else { document.getElementById('rewriteExperience').value = '- Built and delivered web features that improved user workflows.\n- Collaborated with cross-functional teams to deliver product goals.\n- Wrote tests and improved reliability of key components.'; }
 addHistory({ name: 'Resume ' + (new Date()).toLocaleString(), time: Date.now(), ats });
 // auto-scroll to results area
 document.querySelector('.section-title')?.scrollIntoView({behavior:'smooth', block:'start'});
}

// history
const HISTORY_KEY = 'ai_resume_prof_history_v1';
function loadHistory(){ return JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); }
function saveHistory(list){ localStorage.setItem(HISTORY_KEY, JSON.stringify(list)); }
function addHistory(item){ const list = loadHistory(); list.unshift(item); if(list.length>20) list.pop(); saveHistory(list); renderHistory(); }
function renderHistory(){ const list = loadHistory(); const el=document.getElementById('historyList'); el.innerHTML=''; if(!list.length){ el.innerHTML = '<li class="list-group-item small muted">No uploads yet</li>'; return; } list.forEach((it,idx)=>{ const li=document.createElement('li'); li.className='list-group-item d-flex justify-content-between align-items-start small'; li.innerHTML = `<div><strong>${it.name}</strong><div class='muted small'>${new Date(it.time).toLocaleString()}</div></div><div><button class='btn btn-sm btn-outline-primary loadBtn' data-idx='${idx}'>Load</button></div>`; el.appendChild(li); }); }

// events
document.getElementById('analyzeBtn').addEventListener('click', async ()=>{
  const fileInput = document.getElementById('pdfInput'); const paste = document.getElementById('pasteText').value.trim();
  const btn = document.getElementById('analyzeBtn'); btn.disabled = true; btn.innerText = 'Analyzing...';
  try{
    if(paste){ await analyzeAndRender(paste); }
    else if(fileInput.files && fileInput.files[0]){ const text = await extractTextFromPDF(fileInput.files[0]); await analyzeAndRender(text); }
    else{ alert('Please paste text or upload a PDF.'); }
  }catch(err){ console.error(err); alert('Extraction/analysis failed: ' + (err.message || err)); }
  finally{ btn.disabled = false; btn.innerText = 'Extract & Analyze'; }
});

// load sample
document.getElementById('loadSampleBtn').addEventListener('click', ()=>{
  const sample = `Ram Kumar\nBengaluru, India | ramkumar@example.com | +91-98765-43210 | www.ramkumar.dev\nProfessional Summary: Creative and detail-oriented Frontend Developer with 3+ years of experience designing and developing responsive, high-performance web applications. Skilled in React.js, JavaScript (ES6+), TypeScript, Tailwind CSS, and RESTful APIs.\nExperience:\n- Developed and maintained React dashboards serving 10k+ monthly users; reduced page load by 35% using lazy loading and code-splitting.\n- Implemented state management with Redux Toolkit for scalable app architecture.\n- Enhanced accessibility and achieved 98% Lighthouse performance score.\nEducation: B.Tech in Computer Science ‚Äî PES University (2018‚Äì2022)\nSkills: JavaScript, React, TypeScript, HTML5, CSS3, SQL, Redux, Tailwind, Jest, Git, Docker`;
  document.getElementById('pasteText').value = sample; document.getElementById('analyzeBtn').click();
});

// clear history
document.getElementById('clearHistoryBtn').addEventListener('click', ()=>{ if(confirm('Clear upload history?')){ localStorage.removeItem(HISTORY_KEY); renderHistory(); } });

// load history item (demo show info)
document.getElementById('historyList').addEventListener('click',(e)=>{ if(e.target.classList.contains('loadBtn')){ const idx = parseInt(e.target.getAttribute('data-idx')); const list = loadHistory(); const it = list[idx]; if(it) alert(`Loaded history: ${it.name}\nATS: ${it.ats}%\nTime: ${new Date(it.time).toLocaleString()}`); } });

// copy rewrites
document.getElementById('applyRewrite').addEventListener('click', async ()=>{
  const summary = document.getElementById('rewriteSummary').value.trim(); const skills = document.getElementById('rewriteSkills').value.trim(); const exp = document.getElementById('rewriteExperience').value.trim(); const combined = `SUMMARY:\n${summary}\n\nSKILLS:\n${skills}\n\nEXPERIENCE:\n${exp}`;
  try{ await navigator.clipboard.writeText(combined); alert('Suggested rewrite copied to clipboard.'); }catch(err){ alert('Could not copy automatically. Select and copy manually.'); }
});

// download report
document.getElementById('downloadReport').addEventListener('click', ()=>{
  const { jsPDF } = window.jspdf; const doc = new jsPDF({unit:'pt', format:'a4'}); let y=50; const left=40;
  doc.setFontSize(18); doc.text('AI Resume Screener ‚Äî HR Report', left, y); y+=24; doc.setFontSize(11); doc.text(`Generated: ${new Date().toLocaleString()}`, left, y); y+=20;
  const ats = document.getElementById('atsScore').innerText || '‚Äî'; const grammar = document.getElementById('grammarScore').innerText || '‚Äî'; const exp = document.getElementById('experienceScore').innerText || '‚Äî';
  doc.setFontSize(12); doc.text(`ATS: ${ats}   Grammar: ${grammar}   Experience: ${exp}`, left, y); y+=26;
  doc.setFontSize(12); doc.text('Missing skills:', left, y); y+=16; const missing = Array.from(document.getElementById('missingSkills').children).map(c=>c.innerText).join(', ');
  doc.setFontSize(10); doc.text(missing || 'None detected', left, y, {maxWidth:520}); y+=36;
  doc.setFontSize(12); doc.text('Strengths:', left, y); y+=16; const strengths = Array.from(document.getElementById('strengthsList').children).map(li=>li.innerText); doc.setFontSize(10); doc.text(strengths.join('\n'), left, y, {maxWidth:520}); y+= (strengths.length*14)+16;
  doc.setFontSize(12); doc.text('Weaknesses:', left, y); y+=16; const weaknesses = Array.from(document.getElementById('weaknessesList').children).map(li=>li.innerText); doc.setFontSize(10); doc.text(weaknesses.join('\n'), left, y, {maxWidth:520}); y+= (weaknesses.length*14)+16;
  doc.setFontSize(12); doc.text('Suggested Summary:', left, y); y+=14; doc.setFontSize(10); doc.text(document.getElementById('rewriteSummary').value || '-', left, y, {maxWidth:520}); y+=36;
  doc.setFontSize(12); doc.text('Suggested Skills:', left, y); y+=14; doc.setFontSize(10); doc.text(document.getElementById('rewriteSkills').value || '-', left, y, {maxWidth:520}); y+=36;
  doc.setFontSize(12); doc.text('Suggested Experience Bullets:', left, y); y+=14; doc.setFontSize(10); doc.text(document.getElementById('rewriteExperience').value || '-', left, y, {maxWidth:520});
  doc.save('ai-resume-screener-report.pdf');
});

// init
renderHistory();
</script>
</body>
</html>
